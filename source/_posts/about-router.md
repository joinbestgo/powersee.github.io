---
title: 路由器的端口映射和内网穿透
tags:
  - 服务器
date: 2018-06-15 13:54:15
---

如果我的路由器的管理地址为 `192.168.1.1` 如果我开放外网访问，当在外网输入我的公网IP，那么默认是访问 公网IP:80 然后进入路由器的管理界面 192.168.1.1

<!--more-->

**端口映射**

端口映射，可以设置不同的端口来访问路由器内不同的设备。例如我的电脑连接路由器，然后分配的IP是192.168.1.2，此时我可以通过设置一个端口（8888）来映射到电脑，设置完成后输入公网IP:8888 访问的就是电脑了而不是路由器。通过这种方法,可以让电脑开启web服务，然后从外网访问。此处必须输入外网ip来访问，通过内网像 192.168.1.1:8888 这样是没用的。

**内网穿透**

当然上面的那样明显只适合有公网IP的情况，像我的话就没有公网IP。所以外网访问内网就需要内网穿透了，这里使用 ngrok 和`老毛子固件`。

我使用的路由器固件为恩山的hiboyhiboy大神的固件，路由器为斐讯K2。

打开路由器的ngrok穿透界面，去 Server.ngrok.cc 注册帐号，然后得到一个 token 码，复制它，之后开通隧道，可以选择免费的。设置域名前缀，如123，那么最后你的域名就是 <span style="background-color: #ffff00;">123.free.ngrok.cc</span>

之后设置一个端口，用默认的4443也可以。

开通隧道完成后，再回到路由器这里，然后把信息填进去，

[![](/img/2018/ngrok.png)](/img/2018/ngrok.png)

之后再把启动 【ngrok 内网穿透】的的开关打开，再应用本页面设置，此时通过访问域名

如上面的<span style="background-color: #ffff00;">123.free.ngrok.cc</span>

应该就可以进入路由器管理界面了。
